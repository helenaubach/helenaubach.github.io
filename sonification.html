<!DOCTYPE html>
<html lang="en">
<head>
<link rel="stylesheet" href="css.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonification | Helena Ubach</title>
    </head>
<body>

<ul class="head" id="menu">
  <li class="head" style="padding: 14px 16px;font-size: 20px;background-color:0D006A"> Helena Ubach </li>
  <li class="head"><a href="./index.html">Home</a></li>
  <li class="head"><a href="./research.html">Research</a></li>
  <li class="head"><a href="./teaching.html">Teaching</a></li>
  <li  class="dropdown">
    <a class="active" href="./outreach.html" class="dropbtn">Outreach</a>
    <div class="dropdown-content">
      <a href="./outreach.html">Main outreach page</a>
      <a class="active"  href="./sonification.html"> &#9834; Sonification</a></li>
  <li class="head"><a href="./contact.html">Contact</a></li>
    </div>
  </li>
</ul>

<p>
<h3>
Sonification </h3></p>

<p> In collaboration with Jordi Espuny, we have sonified gravitationally lensed gravitational waves, specifically in the wave optics regime (interference). That means we represent gravitational-wave data with audible sound. For details on the method, you can read the <a href="https://arxiv.org/abs/2407.09588" target="_blank">documentation</a>. To head directly to some samples: <a href="https://zoom3.net/sonificacions/ona-gravitacional-lent-exemples.html" target="_blank">sonification samples</a>.</p>

<p>The project has been presented at</p>
<ul>
<li>Scientific Meeting of the Spanish
Astronomical Society: <a href="https://www.sea-astronomia.es/sites/default/files/archivos/proceedings16/ORALES/Ensenanza_Divulgacion_Patrimonio/EDP_Luri_X.pdf" target="_blank">Proceedings</a>. Symposium on Sonification "Exploring New Horizons: Transforming Astronomy Through Sonification and Multidisciplinary Innovation" (Granada, Spain, 2024) </li>
<li>LIGO-Virgo-KAGRA <a href="https://lvkmeeting2024.ifae.es/" target="_blank">Collaboration meeting</a> (Barcelona, 2024)</li>
<li><a href="https://icc.ub.edu/event/art-and-science-day-sonification-and-astrophysics" target="_blank">Art and Science Day</a>, at the Faculty of Fine Arts of the University of Barcelona (2024)</li>
<![Planned, May 2025] https://serviastro.ub.edu/activitats/tallers-i-fires/xi-festa-de-la-ciencia-de-la-ub Science Fair of the UB (2025)>
</ul>

<HR>

<p style="color:red"> -- Page in progress -- </p>

<p>The main page with the sonifications is <a href="https://zoom3.net/sonificacions/" target="_blank">here</a>, where there are three links:</p>

<h4>1. Sonification of a non-lensed gravitational wave</h4>

<p>In <a href="https://zoom3.net/sonificacions/ona-gravitacional.html" target="_blank">the first webpage</a>, you can hear a sonification of gravitational waves coming from the merger of two black holes, a "chirp".</p>

<p>Instructions:<br>
(1) In the text box, write the value of the "chirp mass" of the black hole binary system that you would like to hear.<br>
(2) Click the left "Send" button to create the visual gravitational wave representation. The plot that will appear represents the deformation of space-time (one of the polarisations), h+, as a function of time t.<br>
(3) Click the right "Play sound" button to hear the sonification of the gravitational wave you just created. Please be careful to your ears when hearing high pitch sounds (masses below 1 solar mass). </p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/addons/p5.sound.min.js"></script>
    <script>
        // FunciÃ³n para calcular phi(tau)
        function phi(tau, G, Mc, c, phi0) {
            const term1 = Math.pow(5 * G * Mc / Math.pow(c, 3), -5 / 8);
            const phi_tau = -2 * term1 * Math.pow(tau, 5 / 8) + phi0;
            return phi_tau;
        }

        // FunciÃ³n para calcular h_+(t)
        function h_plus(t, G, Mc, c, r, phi0) {
            const tau = t; // En este caso, t y tau son la misma variable
            const phi_tau = phi(tau, G, Mc, c, phi0);
            const term1 = 1 / r;
            const term2 = Math.pow(G * Mc / Math.pow(c, 2), 5 / 4);
            const term3 = Math.pow(5 / (c * tau), 1 / 4);
            const h_plus_t = term1 * term2 * term3 * Math.cos(phi_tau);
            return h_plus_t;
        }

        // Variables globales
        let G = 6.67430e-11; // Constante de gravitaciÃ³n universal en m^3 kg^-1 s^-2
        let Mc = 30*1.989e30; // Masa en kg (30 masa del Sol)
        let c = 299792458; // Velocidad de la luz en m/s
        let r = 3.086e25; // Distancia en metros (1 megaparsec en metros)
        let phi0 = 0; // Valor inicial de Phi
        let t_init = 3; // Valor inicial de tau
        let t_end = 0.001; // Valor final de tau
        let tau_values = [];
        let h_plus_values = [];

        // lents
        /*let mlent = 30000; // massa de la lent en masses solars
        let y=0.25; // posicio de la font respecte l'alineament lent-observador
        let vv = y/((y.pow(2)+4).pow(1/2)); // eq. 29, BU-2022
        //amp1 = (u+v)/2; // amplitud de la primera imatge
        //amp2 = (u-v)/2; // amplitud de la segona imatge
        let amp1 = (0.25*(~vv+(1/~vv)+2)).pow(1/2); // eq. 30, BU-2022
        let amp2 = (0.25*(~vv+(1/~vv)-2)).pow(1/2); // eq. 30, BU-2022*/
        let massInput, distanceInput, submitButton;

        // GeneraciÃ³n de los valores de tau y h_+(t)
        function generateValues() {
            tau_values = [];
            h_plus_values = [];
            let steps = 4000; // NÃºmero de pasos entre t_init y t_end
            for (let i = 0; i <= steps; i++) {
                let tau = t_init + (t_end - t_init) * (i / steps);
                tau_values.push(tau);
                h_plus_values.push(h_plus(tau, G, Mc, c, r, phi0));
            }
            h_plus_values = normalizeValues(h_plus_values);
        }

        // NormalizaciÃ³n de los valores entre -1 y 1
        function normalizeValues(values) {
            let maxVal = Math.max(...values);
            let minVal = Math.min(...values);
            return values.map(v => 2 * (v - minVal) / (maxVal - minVal) - 1);
        }

        // Setup de p5.js
        function setup() {
            createCanvas(800, 600);
            generateValues();

            // Crear campos de entrada para masa y distancia
            createElement('label', 'Chirp mass of the source<br>(in units of solar mass): ').position(10, 10);
            massInput = createInput('30').position(250, 10);
            
            //createElement('label', 'Distancia (megaparsecs): ').position(10, 40);
            //distanceInput = createInput('1').position(250, 40);

            // Crear botÃ³n de enviar
            submitButton = createButton('Send').position(400, 10);
            submitButton.mousePressed(updateValues);

            // Crear botÃ³n de reproducciÃ³n de sonido
            let playButton = createButton('Play Sound').position(450, 10);
            playButton.mousePressed(playSound);
        }

        // FunciÃ³n para actualizar los valores de masa y distancia
        function updateValues() {
            let massMultiplier = parseFloat(massInput.value());
            //let distanceMpc = parseFloat(distanceInput.value());

            Mc = 1.989e30 * massMultiplier; // Convertir masa a kg
            //r = distanceMpc * 3.086e25; // Convertir distancia a metros (1 Mpc = 3.086e25 metros)

            generateValues();
            redraw();
        }

        // FunciÃ³n para reproducir el sonido
        function playSound() {
            let sampleRate = 44100; // Frecuencia de muestreo
            let sound = new p5.SoundFile();
            sound.setBuffer([h_plus_values], sampleRate);

            // Crear un objeto p5.SoundFile y reproducir el sonido
            let soundBuffer = new Float32Array(h_plus_values.length);
            for (let i = 0; i < h_plus_values.length; i++) {
                soundBuffer[i] = h_plus_values[i];
            }
            let audioBuffer = getAudioContext().createBuffer(1, soundBuffer.length, sampleRate);
            audioBuffer.copyToChannel(soundBuffer, 0);

            let source = getAudioContext().createBufferSource();
            source.buffer = audioBuffer;
            source.connect(getAudioContext().destination);
            source.start();
        }

        // Draw de p5.js
        function draw() {
            background(255);
            frameRate(1);

            // Dibujar ejes
            stroke(0);
            line(50, 550, 750, 550); // Eje x
            line(50, 550, 50, 50); // Eje y

            // Etiquetas de los ejes
            textSize(12);
            textAlign(CENTER);
            text('tau', 400, 580);
            textAlign(RIGHT);
            text('h_+(tau)', 40, 50);

            // Dibujar valores de h_+(t)
            noFill();
            stroke(0, 0, 255);
            beginShape();
            for (let i = 0; i < tau_values.length; i++) {
                let x = map(tau_values[i], t_init, t_end, 50, 750);
                let y = map(h_plus_values[i], -1, 1, 550, 50);
                vertex(x, y);
            }
            endShape();
        }
    </script>


<h4>2. Visualisation of a gravitationally lensed gravitational wave</h4>

<p>In <a href="https://zoom3.net/sonificacions/ona-gravitacional-lent.html" target="_blank">the second webpage</a>, you can visualize the shape of a gravitationally lensed gravitational wave signal. The source of gravitational waves is a merger of two black holes.

In the <a href="https://arxiv.org/abs/2407.09588" target="_blank">documentation</a>, you can read about the physics of the binary black hole merger and the gravitational lensing effect. You can learn about how the different parameters of the lensing system (source mass, lens mass, source position) affect the gravitational wave, and how the distortion looks like as they change.

To hear the sonification of some combinations of the parameters, please visit <a href="https://zoom3.net/sonificacions/ona-gravitacional-lent-exemples.html" target="_blank">the third page</a>.</p>

Instructions:<br>
(1) Choose the value of the source "chirp mass" of the black hole binary system that you would like.<br>
(2) Choose the value of the mass of the gravitational lens - the astrophysical object that will distort the gravitational wave. <br>
(3) Choose the value of y, the parameter that quantifies the misalignment of the source, lens and observer. </p>

<p>The plot that appears represents the deformation of space-time (one of the polarisations), h+, as a function of time t.</p>

<h4>3. Sonification of gravitationally lensed gravitational waves (recorded samples)</h4>

<p>In <a href="https://zoom3.net/sonificacions/ona-gravitacional-lent-exemples.html" target="_blank">the third webpage</a>, you can hear the recorded sonifications of some gravitationally lensed gravitational wave signals. The source of gravitational waves is a merger of two black holes.</p>

To see how other combinations of parameters look like, please visit <a href="https://zoom3.net/sonificacions/ona-gravitacional-lent.html" target="_blank">the second page</a>. 

<br>
<br>
<br>

<p style="text-align: center;">Website &#169; Helena Ubach</p>


</body>
</html>
